<!-- Overlay -->
<div class="login-overlay active">
  <div class="login-modal">
    <button class="btn-close" (click)="exitLoginForm()"></button>

    <!-- Left side -->
    <div class="login-left">
      <img src="/images/background.png" alt="Banner đăng nhập" class="login-banner" />
      <div class="login-left-content">
        <h3>
          <img src="/icons/Icon.svg" alt="Biểu tượng GroceryMart"
            style="width: 28px; height: 28px; margin-bottom: 5px" />
          GroceryMart
        </h3>
        <p>Sản phẩm tạp hóa cao cấp, chất lượng &amp; đáng tin cậy.</p>
      </div>
    </div>

    <!-- Right side -->
    <div class="login-right">
      <h4 style="text-align: center">Đăng nhập</h4>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" style="margin-bottom: 10px">
        <!-- Email or Username -->
        <div class="form-group position-relative">
          <div class="input">
            <input type="text" formControlName="emailOrUsername" placeholder="Nhập username hoặc email của bạn"
              class="form-control input-with-icon" />
            <i class="pi pi-envelope input-icon"></i>
          </div>
          <small *ngIf="
              loginForm.get('emailOrUsername')?.invalid && loginForm.get('emailOrUsername')?.touched
            ">
            *Không được để trống.
          </small>
        </div>

        <!-- Password -->
        <div class="form-group position-relative">
          <div class="input">
            <input [type]="showPassword ? 'text' : 'password'" formControlName="password"
              placeholder="Nhập mật khẩu của bạn" class="form-control input-with-icon" />
            <i [ngClass]="showPassword ? 'pi pi-eye-slash' : 'pi pi-eye'" class="input-icon clickable"
              (click)="togglePassword()"></i>
          </div>
          <small *ngIf="loginForm.get('password')?.errors?.['required'] && loginForm.get('password')?.touched">
            *Không được để trống.
          </small>
          @if(loginForm.get('password')?.errors?.['minlength'] && loginForm.get('password')?.dirty)
          {
          <small>*Mật khẩu có tối thiểu 6 ký tự</small>
          }
        </div>

        <!-- Bottom -->
        <div class="form-bottom">
          <label class="remember"> <input type="checkbox" /> Ghi nhớ đăng nhập </label>
          <a href="#" class="text-link">Quên mật khẩu?</a>
        </div>

        <!-- Buttons -->
        <button type="submit" class="btn-login" [disabled]="isSubmitting || loginForm.invalid">
          {{ isSubmitting ? 'Đang đăng nhập...' : 'Đăng nhập' }}
        </button>
      </form>
      <p class="text-muted">
        Bạn chưa có tài khoản?
        <a routerLink="/register" class="text-link">Đăng ký ngay</a>
      </p>
    </div>
  </div>
</div>