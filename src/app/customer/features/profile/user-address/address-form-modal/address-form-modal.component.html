<p-dialog
  [header]="isEditMode ? 'Chỉnh sửa địa chỉ' : 'Thêm địa chỉ mới'"
  [(visible)]="isOpen"
  [modal]="true"
  [style]="{ width: '50vw' }"
  [breakpoints]="{ '960px': '75vw', '640px': '95vw' }"
  (onHide)="onClose()"
>
  <form [formGroup]="addressForm" (ngSubmit)="onSubmit()" id="addressForm">
    <div class="form-grid">
      <div class="field">
        <label for="addressLine1">
          Địa chỉ dòng 1 <span class="required">*</span>
        </label>
        <input
          pInputText
          id="addressLine1"
          formControlName="addressLine1"
          placeholder="Số nhà, tên đường"
          class="w-full"
        />
        <small
          *ngIf="addressForm.get('addressLine1')?.invalid && addressForm.get('addressLine1')?.touched"
          class="p-error"
        >
          Vui lòng nhập địa chỉ
        </small>
      </div>

      <div class="field">
        <label for="addressLine2">Địa chỉ dòng 2</label>
        <input
          pInputText
          id="addressLine2"
          formControlName="addressLine2"
          placeholder="Phường, Quận/Huyện (tùy chọn)"
          class="w-full"
        />
      </div>

      <div class="field-row">
        <div class="field">
          <label for="city">
            Thành phố <span class="required">*</span>
          </label>
          <input
            pInputText
            id="city"
            formControlName="city"
            placeholder="Thành phố"
            class="w-full"
          />
          <small
            *ngIf="addressForm.get('city')?.invalid && addressForm.get('city')?.touched"
            class="p-error"
          >
            Vui lòng nhập thành phố
          </small>
        </div>

        <div class="field">
          <label for="state">
            Tỉnh/Thành <span class="required">*</span>
          </label>
          <input
            pInputText
            id="state"
            formControlName="state"
            placeholder="Tỉnh/Thành"
            class="w-full"
          />
          <small
            *ngIf="addressForm.get('state')?.invalid && addressForm.get('state')?.touched"
            class="p-error"
          >
            Vui lòng nhập tỉnh/thành
          </small>
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="country">
            Quốc gia <span class="required">*</span>
          </label>
          <input
            pInputText
            id="country"
            formControlName="country"
            placeholder="Quốc gia"
            class="w-full"
          />
          <small
            *ngIf="addressForm.get('country')?.invalid && addressForm.get('country')?.touched"
            class="p-error"
          >
            Vui lòng nhập quốc gia
          </small>
        </div>

        <div class="field">
          <label for="zipCode">
            Mã bưu điện <span class="required">*</span>
          </label>
          <input
            pInputText
            id="zipCode"
            formControlName="zipCode"
            placeholder="Mã bưu điện"
            class="w-full"
          />
          <small
            *ngIf="addressForm.get('zipCode')?.invalid && addressForm.get('zipCode')?.touched"
            class="p-error"
          >
            Vui lòng nhập mã bưu điện
          </small>
        </div>
      </div>

      <div class="field">
        <div class="flex align-items-center">
          <p-checkbox
            formControlName="isDefault"
            [binary]="true"
            inputId="isDefault"
          />
          <label for="isDefault" class="ml-2 mb-0">Đặt làm địa chỉ mặc định</label>
        </div>
      </div>
    </div>
  </form>

  <ng-template pTemplate="footer">
    <p-button
      label="Hủy"
      icon="pi pi-times"
      [text]="true"
      severity="secondary"
      (onClick)="onClose()"
    />
    <p-button
      [label]="isEditMode ? 'Cập nhật' : 'Thêm mới'"
      icon="pi pi-check"
      (onClick)="onSubmit()"
      [disabled]="addressForm.invalid"
    />
  </ng-template>
</p-dialog>
